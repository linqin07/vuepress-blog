#### 1.三次握手

![三次握手](https://i.loli.net/2019/06/15/5d048e58181cf29786.jpg)

1):建立连接后的ACK必须等于1
2):SYN表示建立连接的同步序号。
3):seq表示报文序号
4):ack表示响应对方的报文序号+1

为什么要三次握手？
如果是两次握手，如果由于网速问题导致客户端请求重发，会导致开启多个连接问题。
三次握手就可以判断已经存在连接就不建立新的连接了。



#### 2.四次挥手

![四次挥手](https://i.loli.net/2019/06/15/5d048e58590ff80224.jpg)

1):客户端请求时可能服务端数据没传完，所以先回复一个确认收到关闭请求的报文
2):数据传输完后，服务端主动再发一次关闭的请求
3):客户端等待两个MSL的时间，然后关闭连接，防止最后一个报文丢失。服务端收到最后一个就马上关闭连接。
丢失：
服务器超时会重发第三个报文，客户端就指定是丢包了，重新操作一次，再发个新的关闭确认请求。