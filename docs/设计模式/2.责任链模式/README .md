# Introduction

责任链模式

使用须知：大部分的业务场景，只要是链路的感觉，都可以用上这个模式。

使用时注意：

1. 通过责任链进行一个个`setNext`，最后启动必须是第一个启动。

   ```java
    Approver approver = new Staff("张三");
    approver.setNextApprover(new Manager("李四"))
    		.setNextApprover(new CEO("王五"));
    approver.approve(8000);
   ```

2. 关于抽象类私有变量共享的问题。从上面可以看到，`set`都是通过 `new`进行注入，这样每次抽象类都会重写生成一个私有变量，导致私有变量不能共享。

   解决方案：

   ​	

   ​	

   - 将私有变量变为`static`，让变量属于类，这样可以达到变量共享。但是要注意，如果有多次调用，这个静态变量又会照成多线程并发的问题。如果不是多线程、多请求，只是单请求，这是个不错的解决方案。
   - 将私有变量设置为处理类的参数进行传递，如上代码的`张三`、`李四`等，在抽象类中定义私有变量，设置构造方法。在新建的时候进行初始化即可。缺点就是这样就无法再进行注册到`Spring`中了。

3. 责任链模式要注意每一层的异常处理。异常是由本层处理还是向上抛出，可以根据业务进行对应处理。

