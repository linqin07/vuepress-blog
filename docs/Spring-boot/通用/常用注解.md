### Spring-boot中使用@ConditionalOnExpression注解，在特定情况下初始化bean

想要实现的功能：

我想在配置文件中设置一个开关，enabled，在开关为true的时候才实例化bean，进行相关业务逻辑的操作。

具体实现：

1. 要实例化的bean

2. 配置类



代码：

想要实例化的bean：在这个类上不要加@Component注解

```java
public class OrderMessageMonitor {

    public OrderMessageMonitor(ConfigContext configContext) {
    ……
    
    }
    public doSomeThing() {
    }

}
```

配置类：

`@ConditionalOnExpression("#{${resources.web.fastjson}==true}")`

```java
@Configuration
@ConditionalOnExpression("${enabled:false}")
public class BigpipeConfiguration {
    @Bean
    public OrderMessageMonitor orderMessageMonitor(ConfigContext configContext) {
        return new OrderMessageMonitor(configContext);
    }
}
```





- @Primary：自动装配时当出现多个 Bean 候选者时，被注解为 @Primary 的 Bean 将作为首选者，否则将抛出异常 


- @dependenOn

- @PostConstruct

    该注解是Java自己提供的注解，表示此方法是在Spring实例化该Bean之后马上执行此方法，之后才会去实例化其他Bean，并且一个Bean中 @PostConstruct 注解的方法可以有多个