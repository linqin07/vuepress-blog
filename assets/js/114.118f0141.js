(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{340:function(a,e,s){"use strict";s.r(e);var t=s(2),r=Object(t.a)({},(function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h3",{attrs:{id:"一、zookeeper的四字命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、zookeeper的四字命令","aria-hidden":"true"}},[a._v("#")]),a._v(" 一、Zookeeper的四字命令")]),a._v(" "),s("p",[a._v("Zookeeper支持某些特定的四字命令字母与其的交互。他们大多数是查询命令，用来获取Zookeeper服务的当前状态及相关信息。用户在客户端可以通过telnet或nc向Zookeeper提交相应的命令。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://blog-07.oss-cn-guangzhou.aliyuncs.com/picBak/1563161762556.png",alt:"1563161762556.png"}})]),a._v(" "),s("p",[a._v("使用命令：")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" ruok"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nc")]),a._v(" localhost "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2181")]),a._v("\n")])])]),s("h3",{attrs:{id:"zookeeper命令工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper命令工具","aria-hidden":"true"}},[a._v("#")]),a._v(" Zookeeper命令工具")]),a._v(" "),s("p",[a._v("再启动Zookeeper服务之后，输入以下命令，连接到Zookeeper服务：")]),a._v(" "),s("blockquote",[s("p",[a._v("zkCli.sh [-server localhost:2181]")])]),a._v(" "),s("p",[a._v("常用命令：")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("create命令")]),a._v(" "),s("blockquote",[s("p",[a._v("create [-s] [-e] path data [acl]")]),a._v(" "),s("p",[a._v("-s: 创建顺序节点")]),a._v(" "),s("p",[a._v("-e: 创建临时节点")]),a._v(" "),s("p",[a._v("path: 在哪里创建")]),a._v(" "),s("p",[a._v("data: 给这个创建的节点添加的数据")]),a._v(" "),s("p",[a._v("acl: 创建节点的权限")])]),a._v(" "),s("p",[a._v("键入: "),s("code",[a._v("create /myzk myzk-data")])])])]),a._v(" "),s("h3",{attrs:{id:"权限模式-schema"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#权限模式-schema","aria-hidden":"true"}},[a._v("#")]),a._v(" 权限模式 Schema")]),a._v(" "),s("p",[a._v("常用的权限模式如下：")]),a._v(" "),s("h5",{attrs:{id:"ip"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ip","aria-hidden":"true"}},[a._v("#")]),a._v(" IP")]),a._v(" "),s("p",[a._v("IP： 使用 IP 识别用户，可以精确匹配 IP，也可以匹配到 IP 段")]),a._v(" "),s("ul",[s("li",[a._v("ip:168.192.1.23 ：精确匹配到 IP")]),a._v(" "),s("li",[a._v("ip:168.192.0.1/24：模糊匹配 IP 段，168.192.0.*")])]),a._v(" "),s("p",[a._v("Note： IP 地址是 32 位，十进制表示 4 个十进制；IP 段，表示前面多少位相同。")]),a._v(" "),s("h5",{attrs:{id:"digest"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#digest","aria-hidden":"true"}},[a._v("#")]),a._v(" Digest")]),a._v(" "),s("p",[a._v("Digest，类似 "),s("code",[a._v("username:password")]),a._v("，用户名和密码。")]),a._v(" "),s("p",[a._v("设置 ACL")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#使用命令生成密钥 密码123456对应下面的密文")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" -n root:123456 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl dgst -binary -sha1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openssl base64\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# root:u53OoA8hprX59uwFsvQBS3QuI00")]),a._v("\nsetAcl /zk digest:root:u53OoA8hprX59uwFsvQBS3QuI00"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(":cdrwa\n")])])]),s("p",[a._v("访问时需要先增加权限")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("addauth digest user:user\n")])])]),s("h5",{attrs:{id:"world"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#world","aria-hidden":"true"}},[a._v("#")]),a._v(" World")]),a._v(" "),s("p",[a._v("没有密码，对所有用户都开放权限。可以看作特殊的 Digest 模式。")]),a._v(" "),s("h5",{attrs:{id:"super"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#super","aria-hidden":"true"}},[a._v("#")]),a._v(" Super")]),a._v(" "),s("p",[a._v("只有超级用户，才有权限，也可看作特殊的 Digest 模式。")]),a._v(" "),s("h4",{attrs:{id:"zk-中-acl-特性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zk-中-acl-特性","aria-hidden":"true"}},[a._v("#")]),a._v(" ZK 中 ACL 特性")]),a._v(" "),s("p",[a._v("ZK 中 ACL 特性：")]),a._v(" "),s("ol",[s("li",[a._v("无继承性：子节点，"),s("strong",[a._v("不会继承")]),a._v("父节点的 ACL；")]),a._v(" "),s("li",[a._v("Client 仍可以访问子节点，即使不可以访问父节点；")])])])}),[],!1,null,null,null);e.default=r.exports}}]);