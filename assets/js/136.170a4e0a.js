(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{530:function(t,a,s){"use strict";s.r(a);var r=s(20),e=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"crontab"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#crontab"}},[t._v("#")]),t._v(" crontab")]),t._v(" "),a("blockquote",[a("p",[t._v("Linux crontab是用来定期执行程序的命令。")]),t._v(" "),a("p",[t._v("当安装完成操作系统之后，默认便会启动此任务调度命令。")])]),t._v(" "),a("ol",[a("li",[t._v("cron 在 3 个地方查找配置文件：\n"),a("code",[t._v("/var/spool/cron/")]),t._v(" 这个目录下存放的是每个用户包括 root 的 crontab 任务，每个任务以创建者的名字命名，比如 tom 建的 crontab 任务对应的文件就是 /var/spool/cron/tom。\n一般一个用户最多只有一个 crontab 文件。")]),t._v(" "),a("li",[t._v("/etc/crontab 这个文件负责安排由系统管理员制定的维护系统以及其他任务的 crontab。")]),t._v(" "),a("li",[a("code",[t._v("/etc/cron.d/")]),t._v(" 这个目录用来存放任何要执行的crontab文件或脚本。")])]),t._v(" "),a("h3",{attrs:{id:"语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[t._v("#")]),t._v(" 语法")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("crontab")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-u")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-e")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("参数说明")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("-e : 执行文字编辑器来设定时程表，内定的文字编辑器是 VI")]),t._v(" "),a("li",[t._v("-r : 删除目前的时程表")]),t._v(" "),a("li",[t._v("-l : 列出目前的时程表")])]),t._v(" "),a("p",[a("strong",[t._v("启停")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("/sbin/service crond "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("start"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("stop"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("restart"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("reload"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n或则\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" crond "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("start"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("stop"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("restart"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("reload"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("查看邮件童通知：cat /var/spool/mail/root，如果想去掉通知，执行脚本命令增加 "),a("code",[t._v("> /dev/null 2>&1")])]),t._v(" "),a("h3",{attrs:{id:"执行脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行脚本"}},[t._v("#")]),t._v(" 执行脚本")]),t._v(" "),a("ol",[a("li",[t._v("创建执行脚本")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" hello.sh \n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("编辑脚本")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" hello.sh \n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("让环境生效，运行指定路径的 jar 包， Xms：表示jvm所需最小内存，Xmx：表示jvm所需最大内存。")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile \n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/java \n/usr/java/jdk1.8.0/bin/java "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-jar")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Xms512m")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Xmx1024m")]),t._v(" /usr/java/hi.jar\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("创建/查看定时任务\n"),a("code",[t._v("crontab -e")]),t._v("  ，指定每年每月每天的凌晨三点整执行脚本")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("00 03 * * * "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" /usr/java/hello.sh\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[t._v("shell 脚本权限")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("755")]),t._v(" /usr/java/hello.sh\n")])])]),a("h3",{attrs:{id:"常用-cron-表达式例子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用-cron-表达式例子"}},[t._v("#")]),t._v(" 常用 cron 表达式例子")]),t._v(" "),a("div",{staticClass:"language-tiki wiki extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("0 0 2 1 * ? *   \t\t\t表示在每月的1日的凌晨2点调整任务\n0 15 10 ? * MON-FRI   \t\t表示周一到周五每天上午10:15执行作业\n0 15 10 ? 6L 2002-2006   \t表示2002-2006年的每个月的最后一个星期五上午10:15执行作\n0 0 10,14,16 * * ?   \t\t每天上午10点，下午2点，4点 \n0 0/30 9-17 * * ?   \t\t朝九晚五工作时间内每半小时 \n0 0 12 ? * WED    \t\t\t表示每个星期三中午12点 \n0 0 12 * * ?   \t\t\t\t每天中午12点触发 \n0 15 10 ? * *    \t\t\t每天上午10:15触发 \n0 15 10 * * ?     \t\t\t每天上午10:15触发 \n0 15 10 * * ? *    \t\t\t每天上午10:15触发 \n0 15 10 * * ? 2005    \t\t2005年的每天上午10:15触发 \n0 * 14 * * ?     \t\t\t在每天下午2点到下午2:59期间的每1分钟触发 \n0 0/5 14 * * ?    \t\t\t在每天下午2点到下午2:55期间的每5分钟触发 \n0 0/5 14,18 * * ?     \t\t在每天下午2点到2:55期间和下午6点到6:55期间的每5分钟触发 \n0 0-5 14 * * ?    \t\t\t在每天下午2点到下午2:05期间的每1分钟触发 \n0 10,44 14 ? 3 WED    \t\t每年三月的星期三的下午2:10和2:44触发 \n0 15 10 ? * MON-FRI    \t\t周一至周五的上午10:15触发 \n0 15 10 15 * ?    \t\t\t每月15日上午10:15触发 \n0 15 10 L * ?    \t\t\t每月最后一日的上午10:15触发 \n0 15 10 ? * 6L    \t\t\t每月的最后一个星期五上午10:15触发 \n0 15 10 ? * 6L 2002-2005    2002年至2005年的每月的最后一个星期五上午10:15触发\n0 1 */7 * * \t\t\t\t每两天执行一次\n")])])]),a("p",[t._v("重启执行脚本  @reboot  sh xxx.sh")])])}),[],!1,null,null,null);a.default=e.exports}}]);