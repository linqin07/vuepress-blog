(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{493:function(e,t,a){"use strict";a.r(t);var s=a(20),o=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"删除topic数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除topic数据"}},[e._v("#")]),e._v(" 删除topic数据")]),e._v(" "),t("p",[e._v("基于kafka2.0版本。")]),e._v(" "),t("h4",{attrs:{id:"_1-命令删除topic"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-命令删除topic"}},[e._v("#")]),e._v(" 1.命令删除topic")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("// 查看所有topic\n./kafka-topics.sh "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--list")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--zookeeper")]),e._v(" 【zookeeper server】\n// 删除\n./bin/kafka-topics  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--delete")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--zookeeper")]),e._v(" 【zookeeper server】  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--topic")]),e._v(" 【topic name】\n")])])]),t("blockquote",[t("p",[e._v("[2019-02-25 15:52:00,070] WARN Connected to an old server; r-o mode will be unavailable (org.apache.zookeeper.ClientCnxnSocket)\nTopic test is marked for deletion.\nNote: This will have no impact if delete.topic.enable is not set to true.")])]),e._v(" "),t("p",[e._v("提示删除给标记了。要设置参数"),t("code",[e._v("delete.topic.enable")]),e._v("才可以删除。一般都不设置。这时，磁盘还是没有释放空间的。")]),e._v(" "),t("blockquote",[t("ul",[t("li",[e._v("现在默认启用主题删除，因为该功能现在已稳定。希望保留先前行为的用户应将代理配置设置"),t("code",[e._v("delete.topic.enable")]),e._v("为"),t("code",[e._v("false")]),e._v("。请记住，删除主题会删除数据并且操作不可逆（即没有“取消删除”操作）")])])]),e._v(" "),t("p",[e._v("新版都默认删除了。可以设置为false不删除。")]),e._v(" "),t("h4",{attrs:{id:"_2-直接删除磁盘"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-直接删除磁盘"}},[e._v("#")]),e._v(" 2.直接删除磁盘")]),e._v(" "),t("p",[e._v("直接查看"),t("code",[e._v("server.properties")]),e._v("的日志记录目录。")]),e._v(" "),t("p",[e._v("默认："),t("code",[e._v("log.dirs=/tmp/kafka-logs")])]),e._v(" "),t("p",[e._v("直接清空这个目录。")]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),t("p",[e._v("要注意 zk 对应的节点信息也要清空。除了"),t("code",[e._v("/zookeeper")]),e._v("和自己的业务相关节点，其他的都删除掉。")])]),e._v(" "),t("p",[e._v("**缺点：**会删除全部的topic。")])])}),[],!1,null,null,null);t.default=o.exports}}]);