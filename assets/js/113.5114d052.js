(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{511:function(e,r,t){"use strict";t.r(r);var s=t(20),a=Object(s.a)({},(function(){var e=this,r=e._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h2",{attrs:{id:"docker-相关概念"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-相关概念"}},[e._v("#")]),e._v(" Docker 相关概念")]),e._v(" "),r("p",[e._v("Docker 是 CS 架构，主要有两个概念：")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("Docker daemon")]),e._v(": 运行在宿主机上，Docker守护进程，用户通过Docker client(Docker命令)与Docker daemon交互")]),e._v(" "),r("li",[r("strong",[e._v("Docker client")]),e._v(": Docker 命令行工具，是用户使用 Docker 的主要方式，Docker client 与 Docker daemon 通信并将结果返回给用户，Docker client 也可以通过 socket 或者 RESTful api 访问远程的 Docker daemon")])]),e._v(" "),r("p",[e._v("docker 的组成：")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("Docker image")]),e._v("：镜像是只读的，镜像中包含有需要运行的文件。镜像用来创建container，一个镜像可以运行多个container；镜像可以通过Dockerfile创建，也可以从Docker hub/registry上下载。")]),e._v(" "),r("li",[r("strong",[e._v("Docker container")]),e._v("：容器是Docker的运行组件，启动一个镜像就是一个容器，容器是一个隔离环境，多个容器之间不会相互影响，保证容器中的程序运行在一个相对安全的环境中。")]),e._v(" "),r("li",[r("strong",[e._v("Docker hub/registry")]),e._v(": 共享和管理Docker镜像，用户可以上传或者下载上面的镜像，官方地址为"),r("code",[e._v("https://registry.hub.docker.com/")]),e._v("，也可以搭建自己私有的Docker registry")])]),e._v(" "),r("h2",{attrs:{id:"docker-安装"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装"}},[e._v("#")]),e._v(" docker "),r("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/#install-using-the-convenience-script",target:"_blank",rel:"noopener noreferrer"}},[e._v("安装"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("您可以根据需要以不同的方式安装Docker Engine：")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("大多数用户会 "),r("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/#install-using-the-repository",target:"_blank",rel:"noopener noreferrer"}},[e._v("设置Docker的存储库"),r("OutboundLink")],1),e._v("并从中进行安装，以简化安装和升级任务。这是推荐的方法。")])]),e._v(" "),r("li",[r("p",[e._v("一些用户下载并"),r("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/#install-from-a-package",target:"_blank",rel:"noopener noreferrer"}},[e._v("手动安装"),r("OutboundLink")],1),e._v("RPM软件包， 并完全手动管理升级。这在诸如在无法访问互联网的空白系统上安装Docker的情况下非常有用。")])]),e._v(" "),r("li",[r("p",[e._v("在测试和开发环境中，一些用户选择使用自动 "),r("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/#install-using-the-convenience-script",target:"_blank",rel:"noopener noreferrer"}},[e._v("便利脚本"),r("OutboundLink")],1),e._v("来安装Docker。")])]),e._v(" "),r("li",[r("p",[e._v("使用官方安装脚本自动安装")]),e._v(" "),r("div",{staticClass:"language-sh extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sh"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-fsSL")]),e._v(" https://get.docker.com "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("bash")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-s")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--mirror")]),e._v(" Aliyun\n")])])])])]),e._v(" "),r("h3",{attrs:{id:"从软件包安装"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#从软件包安装"}},[e._v("#")]),e._v(" 从软件包"),r("a",{attrs:{href:"https://www.cnblogs.com/kingsonfu/p/11576797.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("安装"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("如果无法使用Docker的存储库安装Docker，则可以下载该"),r("code",[e._v(".rpm")]),e._v("发行版的 文件并手动安装。每次要升级Docker Engine时，都需要下载一个新文件。")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("转到https://download.docker.com/linux/centos/ 并选择您的CentOS版本。然后浏览"),r("code",[e._v("x86_64/stable/Packages/")]),e._v(" 并下载"),r("code",[e._v(".rpm")]),e._v("您要安装的Docker版本的文件。")]),e._v(" "),r("blockquote",[r("p",[r("strong",[e._v("注意")]),e._v("：要安装"),r("strong",[e._v("夜间")]),e._v("或"),r("strong",[e._v("测试")]),e._v("（预发布）软件包，"),r("code",[e._v("stable")]),e._v("请将上述URL中的单词更改为"),r("code",[e._v("nightly")]),e._v("或"),r("code",[e._v("test")]),e._v("。 "),r("a",{attrs:{href:"https://docs.docker.com/engine/install/",target:"_blank",rel:"noopener noreferrer"}},[e._v("了解"),r("strong",[e._v("每晚")]),e._v("和"),r("strong",[e._v("测试")]),e._v("频道"),r("OutboundLink")],1),e._v("。")])])]),e._v(" "),r("li",[r("p",[e._v("安装Docker Engine，将下面的路径更改为您下载Docker软件包的路径。")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("$ sudo yum install /path/to/package.rpm\n")])])]),r("p",[e._v("Docker已安装但尚未启动。"),r("code",[e._v("docker")]),e._v("创建该组，但没有用户添加到该组。")])]),e._v(" "),r("li",[r("p",[e._v("启动Docker")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("$ sudo systemctl start docker\n")])])])]),e._v(" "),r("li",[r("p",[e._v("通过运行"),r("code",[e._v("hello-world")]),e._v(" 映像来验证是否正确安装了Docker Engine 。")]),e._v(" "),r("div",{staticClass:"language-sh extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sh"}},[r("code",[e._v("$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run hello-world\n")])])]),r("p",[e._v("此命令下载测试图像并在容器中运行它。容器运行时，它会打印参考消息并退出。")])]),e._v(" "),r("li",[r("p",[e._v("修改镜像源")]),e._v(" "),r("p",[e._v("新版的 Docker 推荐使用 json 配置文件的方式，默认为 "),r("code",[e._v("/etc/docker/daemon.json")]),e._v("，非默认路径需要修改 dockerd 的 –config-file，在该文件中加入如下内容：")]),e._v(" "),r("div",{staticClass:"language-json extra-class"},[r("pre",{pre:!0,attrs:{class:"language-json"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token property"}},[e._v('"registry-mirrors"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://docker.mirrors.ustc.edu.cn"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),r("blockquote",[r("p",[e._v("提示：")]),e._v(" "),r("p",[e._v("运行 docker search mysql 提示下面报错，可以修改 /etc/hosts 文件映射对应域名 ip")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("Error response from daemon: Get https://index.docker.io/v1/search?q=sameersbn&n=25: dial tcp: lookup index.docker.io on 192.168.65.1:53: read udp 192.168.65.2:45190->192.168.65.1:53: i/o timeout\n")])])])])])]),e._v(" "),r("p",[e._v("Docker Engine已安装并正在运行。您需要使用"),r("code",[e._v("sudo")]),e._v("来运行Docker命令。继续"),r("a",{attrs:{href:"https://docs.docker.com/engine/install/linux-postinstall/",target:"_blank",rel:"noopener noreferrer"}},[e._v("执行Linux的安装后步骤，"),r("OutboundLink")],1),e._v("以允许非特权用户运行Docker命令以及其他可选配置步骤。")]),e._v(" "),r("h4",{attrs:{id:"升级docker引擎"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#升级docker引擎"}},[e._v("#")]),e._v(" 升级DOCKER引擎")]),e._v(" "),r("p",[e._v("要升级Docker Engine，请下载更新的软件包文件，并使用 代替重复 "),r("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/#install-from-a-package",target:"_blank",rel:"noopener noreferrer"}},[e._v("安装过程"),r("OutboundLink")],1),e._v("，并指向新文件。"),r("code",[e._v("yum -y upgrade``yum -y install")])]),e._v(" "),r("h2",{attrs:{id:"卸载docker"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#卸载docker"}},[e._v("#")]),e._v(" 卸载Docker")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("卸载Docker Engine，CLI和Containerd软件包：")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("$ sudo yum remove docker-ce docker-ce-cli containerd.io\n")])])])]),e._v(" "),r("li",[r("p",[e._v("主机上的映像，容器，卷或自定义配置文件不会自动删除。要删除所有图像，容器和卷：")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("$ sudo rm -rf /var/lib/docker\n")])])])])]),e._v(" "),r("p",[e._v("您必须手动删除所有已编辑的配置文件。")]),e._v(" "),r("h3",{attrs:{id:"docker-帐号"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-帐号"}},[e._v("#")]),e._v(" docker 帐号")]),e._v(" "),r("p",[e._v("https://hub.docker.com/")]),e._v(" "),r("p",[e._v("lq1234567")]),e._v(" "),r("p",[e._v("Lq123456@07")]),e._v(" "),r("h3",{attrs:{id:"docker-exec-内常用命令"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-exec-内常用命令"}},[e._v("#")]),e._v(" docker exec 内常用命令")]),e._v(" "),r("ul",[r("li",[e._v("安装ps命令 apt-get update && apt-get install procps")]),e._v(" "),r("li")])])}),[],!1,null,null,null);r.default=a.exports}}]);