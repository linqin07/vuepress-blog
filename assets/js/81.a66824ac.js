(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{306:function(e,t,a){"use strict";a.r(t);var o=a(2),r=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"删除topic数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除topic数据","aria-hidden":"true"}},[e._v("#")]),e._v(" 删除topic数据")]),e._v(" "),a("p",[e._v("基于kafka2.0版本。")]),e._v(" "),a("h4",{attrs:{id:"_1-命令删除topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-命令删除topic","aria-hidden":"true"}},[e._v("#")]),e._v(" 1.命令删除topic")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("// 查看所有topic\n./kafka-topics.sh --list --zookeeper 【zookeeper server】\n// 删除\n./bin/kafka-topics  --delete --zookeeper 【zookeeper server】  --topic 【topic name】\n")])])]),a("blockquote",[a("p",[e._v("[2019-02-25 15:52:00,070] WARN Connected to an old server; r-o mode will be unavailable (org.apache.zookeeper.ClientCnxnSocket)\nTopic test is marked for deletion.\nNote: This will have no impact if delete.topic.enable is not set to true.")])]),e._v(" "),a("p",[e._v("提示删除给标记了。要设置参数"),a("code",[e._v("delete.topic.enable")]),e._v("才可以删除。一般都不设置。这时，磁盘还是没有释放空间的。")]),e._v(" "),a("blockquote",[a("ul",[a("li",[e._v("现在默认启用主题删除，因为该功能现在已稳定。希望保留先前行为的用户应将代理配置设置"),a("code",[e._v("delete.topic.enable")]),e._v("为"),a("code",[e._v("false")]),e._v("。请记住，删除主题会删除数据并且操作不可逆（即没有“取消删除”操作）")])])]),e._v(" "),a("p",[e._v("新版都默认删除了。可以设置为false不删除。")]),e._v(" "),a("h4",{attrs:{id:"_2-直接删除磁盘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-直接删除磁盘","aria-hidden":"true"}},[e._v("#")]),e._v(" 2.直接删除磁盘")]),e._v(" "),a("p",[e._v("直接查看"),a("code",[e._v("server.properties")]),e._v("的日志记录目录。")]),e._v(" "),a("p",[e._v("默认："),a("code",[e._v("log.dirs=/tmp/kafka-logs")])]),e._v(" "),a("p",[e._v("直接清空这个目录。")]),e._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",[e._v("要注意 zk 对应的节点信息也要清空。除了"),a("code",[e._v("/zookeeper")]),e._v("和自己的业务相关节点，其他的都删除掉。")])]),e._v(" "),a("p",[e._v("**缺点：**会删除全部的topic。")])])}),[],!1,null,null,null);t.default=r.exports}}]);