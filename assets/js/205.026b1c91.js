(window.webpackJsonp=window.webpackJsonp||[]).push([[205],{430:function(t,e,a){"use strict";a.r(e);var s=a(2),l=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"zuul-网关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zuul-网关","aria-hidden":"true"}},[t._v("#")]),t._v(" zuul 网关")]),t._v(" "),a("h4",{attrs:{id:"_1-上传附件过大。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-上传附件过大。","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.上传附件过大。")]),t._v(" "),a("p",[t._v("上传文件过大，如果都经过zuul，会把zuul的jvm内存消耗完。另一方面会对链接"),a("a",{attrs:{href:"https://www.appsdeveloperblog.com/zuul-api-gateway-timeout-error/#:~:text=In%20most%20cases%20setting%20ribbon.ReadTimeout%20property%20will%20solve,will%20not%20work%20if%20you%20type%20it%20otherwise.",target:"_blank",rel:"noopener noreferrer"}},[t._v("超时"),a("OutboundLink")],1),t._v("有影响。如")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("#The connection timeout in milliseconds. Defaults to 2000\nzuul.host.connect-timeout-millis= 300000\nzuul.host.socket-timeout-millis= 300000\n\nribbon.ReadTimeout= 300000\nribbon.ConnectTimeout= 300000\n\nhystrix.command.default.execution.isolation.thread.timeoutInMilliseconds: 60000\n")])])]),a("p",[t._v("可以跳过这个上传的转发，只需要在请求路径加 /zuul 就行。")]),t._v(" "),a("p",[t._v("如原来的路由 请求路径为 /vpa/skill/A  改为 /vpa/zuul/skill/A 即可，其中 context-path=/vpa ,文件资源不会消耗 jvm 内存。但设置的ribbon超时还是有影响。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("zuul.routes.vpa-skill.path=/skill/**\nzuul.routes.vpa-skill.serviceId=vpa-service-skill\n")])])])])}),[],!1,null,null,null);e.default=l.exports}}]);