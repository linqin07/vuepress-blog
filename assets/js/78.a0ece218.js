(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{472:function(a,t,s){"use strict";s.r(t);var e=s(20),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h3",{attrs:{id:"倒排索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#倒排索引"}},[a._v("#")]),a._v(" 倒排索引")]),a._v(" "),t("p",[a._v("倒排索引源于实际应用中需要根据属性的值来查找记录。这种索引表中的每一项都包括一个属性值和具有该属性值的各记录的地址。由于不是由记录来确定属性值，而是由属性值来确定记录的位置，因而称为"),t("code",[a._v("倒排索引")]),a._v("。简单理解就是用各个索引来记录每个分词的位置。")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://blog-07.oss-cn-guangzhou.aliyuncs.com/picBak/1553342434003.png",alt:"1553342434003.png"}})]),a._v(" "),t("h3",{attrs:{id:"查询分词"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询分词"}},[a._v("#")]),a._v(" 查询分词")]),a._v(" "),t("p",[a._v("根据指定分词器进行解析。es 自带几个分词器："),t("code",[a._v("standard")]),a._v("、"),t("code",[a._v("simple")]),a._v("、"),t("code",[a._v("whitespace")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-XPOST")]),a._v(" http://127.0.0.1:9200/_analyze?pretty -H"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Content-Type:application/json'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'{"analyzer":"ik","text":"2021-02-01 11:47:22.860 [admin-client-network-thread] WARN org.apache.kafka.clients.NetworkClient:671 - [NetworkClient clientId=admin-1051] Connection to node -1 could not be established. Broker may not be available."}\'')]),a._v("\n")])])]),t("h3",{attrs:{id:"插入doc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插入doc"}},[a._v("#")]),a._v(" 插入doc")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-XPUT")]),a._v(" http://127.0.0.1:9200/indexName/doc/uuid -H"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Content-Type:application/json'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"userName"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"joe"')]),a._v(",\n"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"pwd"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"123456"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("h3",{attrs:{id:"新建索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新建索引"}},[a._v("#")]),a._v(" 新建索引")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-XPUT")]),a._v(" http://127.0.0.1:9200/indexName -H"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Content-Type:application/json'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"mapping"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"..."')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("h3",{attrs:{id:"删除索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除索引"}},[a._v("#")]),a._v(" 删除索引")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-XDELETE")]),a._v(" http://192.168.30.20:9200/department_process\n")])])]),t("h2",{attrs:{id:"查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询"}},[a._v("#")]),a._v(" 查询：")]),a._v(" "),t("p",[a._v("相关度查询 multi_match,")]),a._v(" "),t("p",[a._v("全文检索 query_string,")]),a._v(" "),t("p",[a._v("分词后全文检索 matchQuery")]),a._v(" "),t("h2",{attrs:{id:"使用-elasticdump-导入导出数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-elasticdump-导入导出数据"}},[a._v("#")]),a._v(" 使用 elasticdump 导入导出数据")]),a._v(" "),t("p",[a._v("https://www.npmjs.com/package/elasticdump")]),a._v(" "),t("h3",{attrs:{id:"installing"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installing"}},[a._v("#")]),a._v(" Installing")]),a._v(" "),t("p",[a._v("(local)")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" elasticdump\n./bin/elasticdump\n")])])]),t("p",[a._v("(global)")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" elasticdump "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v("\nelasticdump\n")])])]),t("p",[a._v("Backup templates to a file")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("elasticdump "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--input")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http://192.168.1.14:9200/department_process "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--output")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("E://my_index.json "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("data\n")])])]),t("h1",{attrs:{id:"import-templates-into-es"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#import-templates-into-es"}},[a._v("#")]),a._v(" Import templates into ES")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("elasticdump "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--input")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("D://my_index.json "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--output")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http://192.168.30.20:9200/department_process "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("data\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);